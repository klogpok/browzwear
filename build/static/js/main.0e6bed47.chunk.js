(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(42)},24:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),s=n(8),i=n.n(s),u=n(6),l=n(13),p=n(1),m=n(2),y=n(4),C=n(3),f=n(5),h=(n(24),function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(y.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={selected:!1},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=[],t=this.props,n=t.country,a=t.onSelectCountry;return n.selected&&e.push("selected"),r.a.createElement("li",{className:e.join(" "),onClick:function(){return a(n)}},n.name)}}]),t}(a.Component)),d=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(y.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(c)))).renderCountries=function(){return n.props.countries.map(function(e,t){return r.a.createElement(h,{key:t,onSelectCountry:n.props.onSelectCountry,country:e})})},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",{className:"box"},this.renderCountries())}}]),t}(r.a.Component),b=function(e){function t(){return Object(p.a)(this,t),Object(y.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=[],t=this.props,n=t.city,a=t.onSelectCity;return n.selected&&e.push("selected"),r.a.createElement("li",{className:e.join(" "),onClick:function(){return a(n)}},n.name)}}]),t}(a.Component),j=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(y.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(c)))).renderCities=function(){return n.props.cities.map(function(e,t){return r.a.createElement(b,{key:t,city:e,onSelectCity:n.props.onSelectCity})})},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",{className:"box"},this.renderCities())}}]),t}(r.a.Component),O=function(e){function t(){return Object(p.a)(this,t),Object(y.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=[],t=this.props,n=t.company,a=t.onSelectCompany;return n.selected&&e.push("selected"),r.a.createElement("li",{className:e.join(" "),onClick:function(){return a(n)}},n.name)}}]),t}(a.Component),v=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(y.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(c)))).renderCompanies=function(){return n.props.companies.map(function(e,t){return r.a.createElement(O,{key:t,company:e,onSelectCompany:n.props.onSelectCompany})})},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",{className:"box company"},this.renderCompanies())}}]),t}(r.a.Component),S=n(11),E=function(e){function t(){return Object(p.a)(this,t),Object(y.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.center,t=e.lat,n=e.lng;return r.a.createElement(S.Map,{google:this.props.google,zoom:17,style:{width:"395px",height:"300px"},initialCenter:{lat:parseFloat(t),lng:parseFloat(n)},center:{lat:parseFloat(t),lng:parseFloat(n)}},r.a.createElement(S.Marker,{title:this.props.title,name:this.props.title,position:{lat:parseFloat(t),lng:parseFloat(n)}}))}}]),t}(r.a.Component),g=Object(S.GoogleApiWrapper)({apiKey:"AIzaSyA0ZHLcOBxzpUPL4MIWdiULswTOwNx774g"})(E),k=n(14),w=n.n(k),N=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(y.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={customers:[],countries:[],cities:[],selectedCountry:"",selectedCity:"",selectedCompany:"",isInitial:!0,center:{}},n.sortCountries=function(e){var t=e.reduce(function(e,t){return t.Country in e?e[t.Country].includes(t.City)||e[t.Country].push(t.City):e[t.Country]=[t.City],e},{});return Object.keys(t).sort(function(e,n){return t[n].length-t[e].length}).map(function(e,t){return{name:e,selected:!1}})},n.sortCities=function(e){var t=n.state.customers.reduce(function(t,n){return e===n.Country&&(n.City in t?t[n.City].includes(n.CompanyName)||t[n.City].push(n.CompanyName):t[n.City]=[n.CompanyName]),t},{});return Object.keys(t).sort(function(e,n){return t[n].length-t[e].length}).map(function(e){return{name:e,selected:!1}})},n.sortCompanies=function(e){return n.state.customers.reduce(function(t,n){return e.name===n.City&&-1===t.indexOf(n.CompanyName)&&t.push(n.CompanyName),t},[]).sort().map(function(e){return{name:e,selected:!1}})},n.onSelectCountry=function(){var e=Object(l.a)(i.a.mark(function e(t){var a,r,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n.state.countries.map(function(e){return e.name===t.name?Object(u.a)({},e,{selected:!0}):Object(u.a)({},e,{selected:!1})}),r=n.state.selectedCity,c=n.sortCities(t.name),!n.state.selectedCity&&n.state.isInitial?r=c[0]:n.state.selectedCity&&!n.state.isInitial&&(r=""),n.setState({countries:a,selectedCountry:t,cities:c,selectedCity:r},function(){return n.onSelectCity(r)});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.onSelectCity=function(e){var t=n.state.cities.map(function(t){return t.name===e.name?Object(u.a)({},t,{selected:!0}):Object(u.a)({},t,{selected:!1})}),a=n.state.selectedCompany,r=n.sortCompanies(e);!n.state.selectedCompany&&n.state.isInitial&&(a=r[0],n.setState({cities:t,selectedCity:e,companies:r,selectedCompany:a,isInitial:!1},function(){return n.onSelectCompany(a)})),n.setState({cities:t,selectedCity:e,companies:r})},n.onSelectCompany=function(){var e=Object(l.a)(i.a.mark(function e(t){var a,r,c,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.customers.find(function(e){return e.CompanyName===t.name}),r="".concat(a.Country," ").concat(a.City," ").concat(a.Address),e.next=4,n.getLocation(r);case 4:c=e.sent,o=n.state.companies.map(function(e){return e.name===t.name?Object(u.a)({},e,{selected:!0}):Object(u.a)({},e,{selected:!1})}),n.setState({companies:o,selectedCompany:Object(u.a)({},t,{selected:!0}),center:c});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.getLocation=function(e){return w.a.setApiKey("AIzaSyA0ZHLcOBxzpUPL4MIWdiULswTOwNx774g"),w.a.fromAddress(e).then(function(e){return e.results[0].geometry.location})},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://northwind.servicestack.net/customers.json").then(function(e){return e.json()}).then(function(t){return e.setState({customers:t.Customers},function(){return e.setState({countries:e.sortCountries(e.state.customers)},function(){return e.onSelectCountry(e.state.countries[0])})})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"app"},r.a.createElement("header",null,r.a.createElement("ul",{className:"header"},r.a.createElement("li",null,"Countries"),r.a.createElement("li",null,"Cities"),r.a.createElement("li",null,"Company"),r.a.createElement("li",null,"Map"))),r.a.createElement("div",{className:"wrapper"},this.state.countries&&r.a.createElement(d,{countries:this.state.countries,onSelectCountry:this.onSelectCountry}),this.state.selectedCountry&&r.a.createElement(j,{onSelectCity:this.onSelectCity,cities:this.state.cities}),this.state.companies&&r.a.createElement(v,{onSelectCompany:this.onSelectCompany,companies:this.state.companies}),this.state.selectedCompany&&r.a.createElement(g,{center:this.state.center,title:this.state.selectedCompany.name}))))}}]),t}(a.Component);o.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.0e6bed47.chunk.js.map